@if (isOpen) {
  <div class="fixed inset-0 z-40 bg-[#212529dd] bg-opacity-75"></div>
  <div class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="relative bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl transform transition-all"
          role="dialog" aria-modal="true">
      
      <div class="flex items-start justify-between p-4 border-b rounded-t border-gray-600">
        <h3 class="text-xl font-semibold text-white">
          {{isCreate ? 'Create New Employee' : 'Edit Employee'}}
        </h3>
        <button (click)="closeForm()" type="button" class="text-gray-400 bg-transparent  rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white">
          <img class="h-5 w-5" src="assets/svg/close.svg" alt="">
        </button>
      </div>
  
      <div class="p-6 space-y-6 max-h-[70vh] overflow-y-auto">
        <form #employeeForm="ngForm" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          @if (errorMessage == undefined) {
            <div class="sm:col-span-2 flex justify-center">
              <span class="text-red-400">
                {{errorMessage}}
              </span>
            </div>
          }
          <div>
            <label for="firstName" class="form-label">First Name</label>
            <input type="text" id="firstName" name="firstName" [(ngModel)]="employeeData.firstName" #firstNameInput="ngModel" required class="form-input">
            @if (firstNameInput.invalid && (firstNameInput.dirty || firstNameInput.touched)) {
              <div class="text-red-400 text-xs mt-1">
                @if (firstNameInput.errors?.['required']) {
                  <span>First Name is required.</span>
                }
              </div>
            }
          </div>
          <div>
            <label for="lastName" class="form-label">Last Name</label>
            <input type="text" id="lastName" name="lastName" [(ngModel)]="employeeData.lastName" #lastNameInput="ngModel" required class="form-input">
            @if (lastNameInput.invalid && (lastNameInput.dirty || lastNameInput.touched)) {
              <div class="text-red-400 text-xs mt-1">
                @if (lastNameInput.errors?.['required']) {
                  <span>Last Name is required.</span>
                }
              </div>
            }
          </div>
          <div class="sm:col-span-2">
            <label for="position" class="form-label">Position</label>
            <select id="position" name="position" [(ngModel)]="employeeData.positionId" required class="form-input">
              @for (position of positionList; track $index) {
                <option [value]="position.PositionId">{{position.PositionName}}</option>
              }
            </select>
          </div>
          <div class="sm:col-span-2">
            <label for="branch" class="form-label">Branch</label>
            <select id="branch" name="branch" required [(ngModel)]="employeeData.branchId" class="form-input">
              @for (branch of branchList; track $index) {
                <option [value]="branch.BranchId">{{branch.BranchName}}</option>
              }
            </select>
          </div>
          <div>
            <label for="contractStartDateValue" class="form-label">Contract Start Date</label>
            <input type="date" onkeydown="return false"  id="contractStartDateValue" name="contractStartDateValue" [(ngModel)]="contractStartDateValue" #contractStartDateInput="ngModel" required class="form-input">
            @if (contractStartDateInput.invalid && (contractStartDateInput.dirty || contractStartDateInput.touched)) {
              <div class="text-red-400 text-xs mt-1">
                @if (contractStartDateInput.errors?.['required']) {
                  <span>Contract Start Date is required.</span>
                }
              </div>
            }
          </div>
          <div>
            <label for="contractEndDateValueValue" class="form-label">Contract End Date</label>
            <input type="date" onkeydown="return false"  id="contractEndDateValueValue" name="contractEndDateValueValue" [(ngModel)]="contractEndDateValue" #contractEndDateInput="ngModel" required class="form-input">
            @if (contractEndDateInput.invalid && (contractEndDateInput.dirty || contractEndDateInput.touched)) {
              <div class="text-red-400 text-xs mt-1">
                @if (contractEndDateInput.errors?.['required']) {
                  <span>Contract End Date is required.</span>
                }
              </div>
            }
          </div>
        </form>
      </div>
  
      <div class="flex items-center p-6 space-x-2 border-t rounded-b border-gray-600">
        <button
          (click)="saveEmployee()" 
          [disabled]="employeeForm.invalid"
          type="button" 
          class="text-white focus:ring-4 focus:outline-none focus:ring-sky-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-sky-500 hover:bg-sky-600 focus:ring-sky-800 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          Save Employee
        </button>
        <button (click)="closeForm()" type="button" class="focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 bg-gray-700 text-gray-300 border-gray-500 hover:text-white hover:bg-gray-600 focus:ring-gray-600">
          Cancel
        </button>
      </div>
  
    </div>
  </div>
}